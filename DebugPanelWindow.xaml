<Window x:Class="SteamPersonaSwitcher.DebugPanelWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Debug Log"
        Width="350"
        MinWidth="200"
        MaxWidth="800"
        SizeToContent="Height"
        WindowStyle="None"
        AllowsTransparency="False"
        ResizeMode="CanResizeWithGrip"
        ShowInTaskbar="False"
        Topmost="False"
        Background="#1E1E1E"
        BorderBrush="#3E3E42"
        BorderThickness="1">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Debug Panel Header -->
        <Border Grid.Row="0" Background="#2D2D30" Padding="10,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" 
                           Text="ðŸ› Debug Log" 
                           Foreground="White" 
                           FontWeight="SemiBold"
                           VerticalAlignment="Center"/>

                <CheckBox Grid.Column="1" 
                          x:Name="WordWrapCheckBox"
                          Content="Word Wrap" 
                          Foreground="White"
                          IsChecked="True"
                          Margin="10,0"
                          Checked="WordWrapCheckBox_Changed"
                          Unchecked="WordWrapCheckBox_Changed"
                          ToolTip="Enable word wrapping for long log messages"/>

                <CheckBox Grid.Column="2" 
                          x:Name="AutoScrollCheckBox"
                          Content="Auto-scroll" 
                          Foreground="White"
                          IsChecked="True"
                          Margin="10,0"
                          ToolTip="Automatically scroll to newest messages"/>

                <Button Grid.Column="3" 
                        Content="ðŸ“‹ Copy" 
                        Click="CopyDebugLog_Click"
                        Width="70"
                        Margin="5,0"
                        Padding="5,2"
                        ToolTip="Copy all logs to clipboard"/>

                <Button Grid.Column="4" 
                        Content="ðŸ—‘ï¸ Clear" 
                        Click="ClearDebugLog_Click"
                        Width="70"
                        Margin="5,0,0,0"
                        Padding="5,2"
                        ToolTip="Clear debug log"/>
            </Grid>
        </Border>

        <!-- Debug Log Content -->
        <ScrollViewer Grid.Row="1" 
                      x:Name="DebugScrollViewer"
                      VerticalScrollBarVisibility="Auto"
                      HorizontalScrollBarVisibility="Disabled"
                      Background="#1E1E1E"
                      Padding="10">
            <ItemsControl x:Name="DebugLogItems" Background="Transparent" HorizontalContentAlignment="Stretch">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Foreground="{Binding Color}" 
                                   FontFamily="Consolas, Courier New, monospace"
                                   FontSize="11"
                                   Margin="0,1"
                                   Text="{Binding FullText}"
                                   TextWrapping="Wrap"
                                   HorizontalAlignment="Stretch"/>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
                <ItemsControl.ItemContainerStyle>
                    <Style>
                        <Setter Property="FrameworkElement.HorizontalAlignment" Value="Stretch"/>
                    </Style>
                </ItemsControl.ItemContainerStyle>
            </ItemsControl>
        </ScrollViewer>
    </Grid>
</Window>
