<Window x:Class="SteamPersonaSwitcher.GameDiscoveryDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Discover Running Games" 
        Width="600" Height="450"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize"
        MinWidth="400" MinHeight="300">
    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,10">
            <TextBlock Text="Potential Games Detected" FontWeight="Bold" FontSize="14"/>
            <TextBlock Text="Select the games you want to add to your mapping list:" 
                       TextWrapping="Wrap" Margin="0,5,0,0" Foreground="Gray"/>
        </StackPanel>
        
        <!-- Games List -->
        <ListView Grid.Row="1" x:Name="GamesListView" 
                  SelectionMode="Multiple"
                  BorderThickness="1"
                  BorderBrush="#CCCCCC">
            <ListView.View>
                <GridView>
                    <GridViewColumn Width="35">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <CheckBox IsChecked="{Binding IsSelected}" 
                                          VerticalAlignment="Center"
                                          Click="CheckBox_Click"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="Process Name" Width="150" 
                                    DisplayMemberBinding="{Binding ProcessName}"/>
                    <GridViewColumn Header="Window Title" Width="200" 
                                    DisplayMemberBinding="{Binding WindowTitle}"/>
                    <GridViewColumn Header="Score" Width="50">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Score}" 
                                           HorizontalAlignment="Center"
                                           ToolTip="{Binding ReasonsSummary}"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Header="Why?" Width="120">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding ReasonsSummary}" 
                                           TextTrimming="CharacterEllipsis"
                                           ToolTip="{Binding ReasonsSummary}"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>
        </ListView>
        
        <!-- Selection controls -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,10,0,0">
            <Button Content="Select All" Click="SelectAll_Click" Padding="10,5" Margin="0,0,5,0"/>
            <Button Content="Select None" Click="SelectNone_Click" Padding="10,5"/>
            <TextBlock x:Name="SelectionCountText" VerticalAlignment="Center" Margin="15,0,0,0" 
                       Foreground="Gray"/>
        </StackPanel>
        
        <!-- Dialog buttons -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,0">
            <Button Content="Add Selected" Click="AddSelected_Click" 
                    Padding="15,8" Margin="0,0,10,0" 
                    IsDefault="True" FontWeight="SemiBold"/>
            <Button Content="Cancel" Click="Cancel_Click" 
                    Padding="15,8" IsCancel="True"/>
        </StackPanel>
    </Grid>
</Window>
